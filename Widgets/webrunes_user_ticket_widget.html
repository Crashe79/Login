<link rel="import" href="http://wrio.s3-website-us-east-1.amazonaws.com/jquery.html">
<link rel="import" href="http://wrio.s3-website-us-east-1.amazonaws.com/handlebars.html">

<script>
    (function($){
        var source  =
                '<div><ul class="info nav nav-pills nav-stacked" id="profile-accordion">'+
                '<li class="panel"><a href="#profile-element" data-parent="#profile-accordion" data-toggle="collapse">'+
                '<span class="glyphicon glyphicon-chevron-down pull-right"></span>Logged with WRIO</a>'+
                '<div class="in" id="profile-element">'+
                '<div class="tickets"><div class="media thumbnail"><div class="col-xs-12 col-md-6 col-lg-5">'+
                '<img src="img/profile1-200x200.jpg" class="pull-left"><ul class="details">'+
                '<li>Name: {{userName}}</li>'+
                '<li>Registered: 22 Jun 2013</li>'+
                '<li>Rating: 244</li>'+
                '<li>Followers: 1,634</li>'+
                '<li>Posts: 1,634</li>'+
                '</ul></div><div class="col-xs-12 col-md-6 col-lg-7">'+
                '<div class="media-body">Disclaimer: {{userDescription}}</div></div></div></div></div></li></ul></div>';

        var proto = Object.create(HTMLElement.prototype);
        proto.createdCallback = function() {
            var userProfile = this.getUserTicketData();
            var template = Handlebars.compile(source);
            var html = template(userProfile);
            this.innerHTML = html;
        };
        proto.getUserTicketData = function(){
            return {userId: '12345', userName: 'Alexey Anshakov', userDescription: 'Text text text...'};
        };
        document.registerElement('webrunes-hub-widget', {prototype: proto});
    })(jQuery);
</script>